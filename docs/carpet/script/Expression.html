<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_201) on Fri Mar 15 18:00:37 ADT 2019 -->
<title>Expression</title>
<meta name="date" content="2019-03-15">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Expression";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">carpet.script</div>
<h2 title="Class Expression" class="title">Class Expression</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>carpet.script.Expression</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Cloneable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Expression</span>
extends java.lang.Object
implements java.lang.Cloneable</pre>
<div class="block"><h1>Scarpet programming language</h1>

 <p>Scarpet (a.k.a. Carpet Script, or Script for Carpet) is a programming language designed to provide
 the ability to write custom programs to run within Minecraft and
 interact with the world.</p>

 <p>The project was initially built based on the EvalEx project,
 however it now diverged so far away from the original implementation,
 it would be hard to tell it without this mention.
 EvalEx is a handy expression evaluator for Java, that
 allows to evaluate simple mathematical and boolean expressions.
 For more information, see:
 <a href="https://github.com/uklimaschewski/EvalEx">EvalEx GitHub
 repository</a></p>

 <p>This specification is divided into two sections: this one is agnostic
 to any Minecraft related features and could function on its own, and <a href="../../carpet/script/CarpetExpression.html" title="class in carpet.script"><code>CarpetExpression</code></a> for
 Minecraft specific routines and world manipulation functions.</p>

 <h1>Synopsis</h1>

 <pre>
 script run print('Hello World!')
 </pre>
 <p>or an overly complex example:</p>
 <pre>
 /script run
 $    block_check(x1, y1, z1, x2, y2, z2, block_to_check) ->
 $    (
 $        l(minx, maxx) = sort(l(x1, x2));
 $        l(miny, maxy) = sort(l(y1, y2));
 $        l(minz, maxz) = sort(l(z1, z2));
 $        'Need to compute the size of the area of course';
 $        'Cause this language doesn\'t support comments';
 $        xsize = maxx - minx + 1;
 $        ysize = maxy - miny + 1;
 $        zsize = maxz - minz + 1;
 $        total_count = 0;
 $        loop(xsize,
 $            xx = minx + _ ;
 $            loop(ysize,
 $                yy = miny + _ ;
 $                loop(zsize,
 $                    zz = minz + _ ;
 $                    if ( block(xx,yy,zz) == block_to_check,
 $                        total_count += ceil(rand(1))
 $                    )
 $                )
 $            )
 $        );
 $        total_count
 $    );
 $    check_area_around_closest_player_for_block(block_to_check) ->
 $    (
 $        closest_player = player();
 $        l(posx, posy, posz) = query(closest_player, 'pos');
 $        total_count = block_check( posx-8,1,posz-8, posx+8,17,posz+8, 'diamond_ore');
 $        print('There is '+total_count+' diamond ore around you')
 $    )

 /script invoke check_area_around_closest_player_for_block diamond_ore
 </pre>
 <p>or simply</p>
 <pre>
 script run print('There is'+for(rect(x,9,z,8,8,8), _ == 'diamond_ore')+' diamond ore around you')
 </pre>
 <p>It definitely pays to check what higher level <code>scarpet</code> functions have to offer</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#Expression-java.lang.String-">Expression</a></span>(java.lang.String&nbsp;expression)</code>
<div class="block">Programs</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#ArithmeticOperations--">ArithmeticOperations</a></span>()</code>
<div class="block">Arithmetic operations</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected <a href="../../carpet/script/Expression.html" title="class in carpet.script">Expression</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#clone--">clone</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#Constants--">Constants</a></span>()</code>
<div class="block">Constants</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#ListsLoopsAndHigherOrderFunctions--">ListsLoopsAndHigherOrderFunctions</a></span>()</code>
<div class="block">Lists, loops, and higher order functions</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#Operators--">Operators</a></span>()</code>
<div class="block">Operators</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#SystemFunctions--">SystemFunctions</a></span>()</code>
<div class="block">System functions</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../carpet/script/Expression.html#UserDefinedFunctionsAndControlFlow--">UserDefinedFunctionsAndControlFlow</a></span>()</code>
<div class="block">User-defined functions and program control flow</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Expression-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Expression</h4>
<pre>public&nbsp;Expression(java.lang.String&nbsp;expression)</pre>
<div class="block"><h1>Programs</h1>
 <p>
 You can think of an program like a mathematical expression, like
 <code>"2.4*sin(45)/(2-4)"</code> or  <code>"sin(y)&gt;0 &amp; max(z, 3)&gt;3"</code>
 Writing a program, is like writing a <code>2+3</code>, just a bit longer</p>

 <h2>Basic language components</h2>
 <p>Programs consist of constants, like <code>2</code>, <code>3,14</code>, <code>pi</code>, or <code>'foo'</code>,
 operators like <code>+</code>, <code>/</code>, <code>-&gt;</code>, variables which you can define, like <code>foo</code>
 or special ones that will be defined for you, like <code>x</code>, or <code>_</code> , which I specific to
 a each built in function, and functions with name, and arguments in the form of <code>f(a,b,c)</code>, where
 <code>f</code> is the function name, and <code>a, b, c</code> are the arguments which can be any other expression.
 And that's all the parts of the language, so all in all - sounds quite simple.</p>

 <h2>Code flow</h2>
 <p>
     Like any other proper programming language, <code>scarpet</code> needs brackets, basically to identify
     where stuff begins and where it ends. In the languages that uses much more complicated constructs, like Java,
     they tend to use all sort of them, round ones to indicate function calls, curly to indicate section of code,
     square to access lists, pointy for generic types etc... I mean - there is no etc, cause they have exhausted
     all the bracket options...
 </p>
 <p><code>Scarpet</code> is different, since it runs everything based on functions (although its not per se a functional language like lisp)
 only needs the round brackets for everything, and it is up to the programmer to organize its code so its readable,
 as adding more brackets does not have any effect on the performance of the programs as they are compiled before they are executed.
 Look at the following example usage of <code>if()</code> function:
 </p>
 <pre>
 if(x&lt;y+6,set(x,8+y,z,'air');plop(x,top('surface',x,z),z,'birch'),sin(query(player(),'yaw'))&gt;0.5,plop(0,0,0,'boulder'),particle(x,y,z,'fire'))
 </pre>
 <p>Would you prefer to read</p>
 <pre>
 if(   x&lt;y+6,
            set(x,8+y,z,'air');
            plop(x,top('surface',x,z),z,'birch'),
       sin(query(player(),'yaw'))&gt;0.5,
            plop(0,0,0,'boulder'),
       particle(x,y,z,'fire')
 )
 </pre>
 <p>Or rather:</p>
 <pre>
 if
 (
     x&lt;y+6,
     (
         set(x,8+y,z,'air');
         plop(x,top('surface',x,z),z,'birch')
     ),

     sin(query(player(),'yaw'))&gt;0.5,
     (
         plop(0,0,0,'boulder')
     ),

     particle(x,y,z,'fire')
 )
 </pre>
 <p>Whichever style you prefer it doesn't matter. It typically depends on the situation and the complexity of the
 subcomponents. No matter how many whitespaces and extra brackets you add - the code will evaluate to exactly the
 same expression, and will run exactly the same, so make sure your programs are nice and clean so others don't
 have problems with them</p>

 <h2>Line indicators</h2>
 <p>Since the maximum command that can be input to the chat is limited in length, you will be probably inserting your
 programs by pasting them to command blocks, however pasting to command blocks will remove some whitespaces and squish
 your newlines making the code not readable. If you are pasting a program that is perfect and will never cause an error,
 I salute you, but for the most part it is quite likely that your program might break, either at compile time, when
 its initially analyzed, or at execute time, when you suddenly attempt to divide something by zero. In these cases
 you would want to get a meaningful error message, but for that you would need to indicate for the compiler where
 did you put these new lines, since command block would squish them. For that, place  at the beginning
 of the line to let the copiler know where are you. This makes so that <code>$</code> is the only character that is
 illegal in programs, since it will be replaced with new lines. As far as I know <code>$</code> is not used
 anywhere inside Minecraft identifiers, so this shoudn't hinder the abilities of your programs.</p>
 <p>Consider these two programs executed as command block command:</p>
 <pre>

 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - .</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="ArithmeticOperations--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ArithmeticOperations</h4>
<pre>public&nbsp;void&nbsp;ArithmeticOperations()</pre>
<div class="block"><h1>Arithmetic operations</h1>
 <p>Section Content</p>
 <p>Other Paragraph</p></div>
</li>
</ul>
<a name="clone--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clone</h4>
<pre>protected&nbsp;<a href="../../carpet/script/Expression.html" title="class in carpet.script">Expression</a>&nbsp;clone()
                    throws java.lang.CloneNotSupportedException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>clone</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.CloneNotSupportedException</code></dd>
</dl>
</li>
</ul>
<a name="Constants--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Constants</h4>
<pre>public&nbsp;void&nbsp;Constants()</pre>
<div class="block"><h1>Constants</h1>
 <p>Section Content</p>
 <p>Other Paragraph</p></div>
</li>
</ul>
<a name="ListsLoopsAndHigherOrderFunctions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ListsLoopsAndHigherOrderFunctions</h4>
<pre>public&nbsp;void&nbsp;ListsLoopsAndHigherOrderFunctions()</pre>
<div class="block"><h1>Lists, loops, and higher order functions</h1>

 <pre>
 loop(num,expr(_),exit(_)?)-&gt;value (last)
 map(list,expr(_,_i), exit(_,_i)) -&gt; list
 filter(list,expr(_,_i),exit(_,_i)) -&gt; list
 first(list,expr(_,_i)) -&gt; value (first)
 all(list,expr(_,_i)) -&gt; boolean
 for(list,expr(_,_i),exit(_,_i)) -&gt; success_count
 </pre></div>
</li>
</ul>
<a name="Operators--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Operators</h4>
<pre>public&nbsp;void&nbsp;Operators()</pre>
<div class="block"><h1>Operators</h1>
 There is a bunch of operators you can use inside the expressions. Those could be considered
 generic type operators. Expression language uses also one type of brackets - the round ones,
 <code>( )</code>
 and it uses it for everything including control flow (in short - replaces all types of brackets
 you would remember from other laguages, like java curly braces etc)

 <h2>Operator '+'</h2>
 <p>Allows to add the results of two expressions. If the operands resolve to numbers, the result is
 arithmetic operation</p>
 <p>Examples:</p>

 <p><code> 2+3 =&gt; 5  </code></p>
 <p><code> 'foo'+3+2 =&gt; 'abc32'  </code></p>
 <p><code> 3+2+'bar' =&gt; '5bar'  </code></p>

 <h2>Operator '-'</h2>
 <p>Allows to add the results of two expressions. If the operands resolve to numbers, the result is
 arithmetic operation</p>

 <p>Examples:</p>

 <p><code> 2+3 =&gt; 5  </code></p>
 <p><code> 'foo'+3+2 =&gt; 'abc32'  </code></p>
 <p><code> 3+2+'bar' =&gt; '5bar'  </code></p></div>
</li>
</ul>
<a name="SystemFunctions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SystemFunctions</h4>
<pre>public&nbsp;void&nbsp;SystemFunctions()</pre>
<div class="block"><h1>System functions</h1>
 <p>Section Content</p>
 <p>Other Paragraph</p></div>
</li>
</ul>
<a name="UserDefinedFunctionsAndControlFlow--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserDefinedFunctionsAndControlFlow</h4>
<pre>public&nbsp;void&nbsp;UserDefinedFunctionsAndControlFlow()</pre>
<div class="block"><h1>User-defined functions and program control flow</h1>
 <p>Section Content</p>
 <p>Other Paragraph</p></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
